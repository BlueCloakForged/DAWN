<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ForgeChain Operator Console</title>
    <link rel="stylesheet" href="style.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">
</head>

<body class="dark-mode">
    <div class="app-container">
        <!-- Sidebar: Pipelines -->
        <aside class="sidebar pipelines-sidebar">
            <div class="sidebar-header">
                <h2>Pipelines</h2>
                <span class="count-tag" id="pipeline-count">0</span>
            </div>
            <div class="search-box">
                <input type="text" id="pipeline-search" placeholder="Search pipelines...">
            </div>
            <div class="sidebar-list" id="pipeline-list">
                <!-- Pipelines injected here -->
            </div>
        </aside>

        <!-- Main Body: Project List -->
        <main class="project-board">
            <header class="main-header">
                <div class="header-left">
                    <h1>ForgeChain Operator Console</h1>
                    <p class="subtitle">Autonomous SDLC Orchestration</p>
                </div>
                <div class="header-right">
                    <button id="btn-new-project" class="btn btn-primary">New Project</button>
                    <button id="btn-refresh" class="btn btn-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path
                                d="M23 4v6h-6M1 20v-6h6M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15" />
                        </svg>
                    </button>
                </div>
            </header>

            <div class="project-grid" id="project-list">
                <!-- Projects injected here -->
            </div>
        </main>

        <!-- Right Panel: Project Details -->
        <aside class="details-panel" id="project-details">
            <div class="empty-state">
                <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1"
                    opacity="0.3">
                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
                    <line x1="9" y1="3" x2="9" y2="21" />
                    <line x1="3" y1="9" x2="21" y2="9" />
                </svg>
                <p>Select a project to view details</p>
            </div>
            <!-- Details content injected here -->
        </aside>
    </div>

    <!-- Modals -->
    <div id="modal-new-project" class="modal">
        <div class="modal-content glass">
            <div class="modal-header">
                <h2>Bootstrap New Project</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Project ID</label>
                    <input type="text" id="new-project-id" placeholder="e.g. my-awesome-app">
                </div>
                <div class="form-group">
                    <label>Pipeline</label>
                    <select id="new-project-pipeline">
                        <!-- Options injected -->
                    </select>
                </div>
                <div class="form-group">
                    <label>Isolation Profile</label>
                    <select id="new-project-profile">
                        <option value="normal">Normal (Local Dev)</option>
                        <option value="isolation">Isolation (Restricted Subprocess)</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button id="btn-create-project" class="btn btn-primary">Bootstrap Project</button>
            </div>
        </div>
    </div>

    <div id="terminal-overlay" class="terminal-overlay">
        <div class="terminal-content glass">
            <div class="terminal-header">
                <div>
                    <span id="terminal-title">Worker Logs</span>
                    <span id="terminal-status" class="terminal-badge">LIVE</span>
                </div>
                <button class="close-terminal" onclick="hideTerminal()">&times;</button>
            </div>
            <div id="terminal-output" class="terminal-output"></div>
        </div>
    </div>

    <!-- Artifact Preview Modal -->
    <div id="modal-artifact-preview" class="modal">
        <div class="modal-content glass" style="width: 80%; height: 80%; max-width: 1000px;">
            <div class="modal-header">
                <h3 id="artifact-preview-title">Artifact Preview</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body" style="flex: 1; overflow: hidden; display: flex; flex-direction: column;">
                <div id="artifact-content-container" class="preview-container">
                    <!-- Preview content injected here (iframe or pre) -->
                </div>
            </div>
            <div class="modal-footer">
                <a id="btn-download-artifact" href="#" class="btn btn-secondary" download>Download Raw File</a>
            </div>
        </div>
    </div>

    <!-- Gate Decision Modal -->
    <div id="modal-gate-decision" class="modal">
        <div class="modal-content glass" style="width: 450px;">
            <div class="modal-header">
                <h3>Required Decision</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <p id="gate-description" class="subtitle" style="margin-bottom: 20px;">Gate resolution required to
                    proceed.</p>
                <input type="hidden" id="gate-filename">
                <div class="form-group">
                    <label>Decision</label>
                    <select id="gate-decision-select">
                        <option value="APPROVED">APPROVE</option>
                        <option value="REJECTED">REJECT</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Reason / Notes</label>
                    <textarea id="gate-reason" style="min-height: 100px;" placeholder="Optional context..."></textarea>
                </div>
                <button id="btn-submit-gate" class="btn btn-primary" style="width: 100%;">Submit Decision</button>
            </div>
        </div>
    </div>

    <!-- Run Comparison Modal -->
    <div id="modal-comparison" class="modal">
        <div class="modal-content glass" style="width: 90%; max-width: 1200px;">
            <div class="modal-header">
                <h3>Run Comparison</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body" id="comparison-body">
                <!-- Comparison diffs here -->
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>

</html>